[
["o-que-é-dados-organizados.html", "3 O que é Dados organizados? 3.1 Breve Introdução ao tidyr", " 3 O que é Dados organizados? “Famílias felizes são todas iguais; toda família infeliz é infeliz à sua maneira.” – Leo Tolstoi “Os conjuntos de dados organizados são todos iguais, mas todos os conjuntos de dados confusos são confusos à sua maneira.” – Hadley Wickham Você vai precisar instalar os pacotes tidyr, devtools e DSR. Para instalar tidyr e devtools, abra o RStudio e execute o comando: install.packages(c(&quot;tidyr&quot;, &quot;devtools&quot;)) DSR é uma coleção de conjuntos de dados. Para instalar DSR, execute o comando: devtools::install_github(&quot;garrettgman/DSR&quot;) Os dados tabulares podem ser organizados de várias maneiras. Os conjuntos de dados abaixo mostram os mesmos dados organizados de quatro maneiras diferentes, sendo que possuem as mesmas variáveis: país, ano, população e casos. Mas cada conjunto organiza os valores em forma de layout diferente. library(DSR) # Primeiro conjunto de dados. table1 ## country year cases population ## 1 Afghanistan 1999 745 19987071 ## 2 Afghanistan 2000 2666 20595360 ## 3 Brazil 1999 37737 172006362 ## 4 Brazil 2000 80488 174504898 ## 5 China 1999 212258 1272915272 ## 6 China 2000 213766 1280428583 # Segundo conjunto de dados. table2 ## country year key value ## 1 Afghanistan 1999 cases 745 ## 2 Afghanistan 1999 population 19987071 ## 3 Afghanistan 2000 cases 2666 ## 4 Afghanistan 2000 population 20595360 ## 5 Brazil 1999 cases 37737 ## 6 Brazil 1999 population 172006362 ## 7 Brazil 2000 cases 80488 ## 8 Brazil 2000 population 174504898 ## 9 China 1999 cases 212258 ## 10 China 1999 population 1272915272 ## 11 China 2000 cases 213766 ## 12 China 2000 population 1280428583 # Terceiro conjunto de dados. table3 ## country year rate ## 1 Afghanistan 1999 745/19987071 ## 2 Afghanistan 2000 2666/20595360 ## 3 Brazil 1999 37737/172006362 ## 4 Brazil 2000 80488/174504898 ## 5 China 1999 212258/1272915272 ## 6 China 2000 213766/1280428583 O último conjunto de dados é uma coleção de duas tabelas. # Quarto conjunto de dados. table4 # cases ## country 1999 2000 ## 1 Afghanistan 745 2666 ## 2 Brazil 37737 80488 ## 3 China 212258 213766 table5 # population ## country 1999 2000 ## 1 Afghanistan 19987071 20595360 ## 2 Brazil 172006362 174504898 ## 3 China 1272915272 1280428583 R segue um conjunto de convenções que tornam um layout de dados tabulares muito mais fácil de trabalhar do que outros. Seus dados serão mais fáceis de trabalhar no R se seguirem três regras: 1.Cada variável no conjunto de dados é colocada em sua própria coluna; 2.Cada observação é colocada em sua própria linha; 3.Cada valor é colocado em sua própria célula. Os dados que satisfazem essas regras são conhecidos como dados organizados. Observe que table1 são dados organizados. Em table1, cada variável é colocada em sua própria coluna, cada observação em sua própria linha e cada valor em sua própria célula. 3.1 Breve Introdução ao tidyr O pacote tidyr tem como principal objetivo transformar um data frame para o formato tidy, ou limpo. De acordo com as regras ditas anteriormente, um dado limpo é aquele com formato long, ou seja, com mais linhas. O outro formato é chamado de wide, com mais colunas. No caso deste exemplo, ano é uma variável, logo é necessário existir uma coluna com os valores de ano. O valor relacionado a UF naqueles anos também é outra variável, então precisa de uma coluna pra representá-lo. Além disso, a própria UF precisa de uma coluna. O tidyr possui duas funções principais: gather: Transforma um tibble wide em long, ou seja, transforma os dados no formato tidy. spread: Transforma um tibble long em wide, ou seja, transforma dados que estão no formato tidy em formato não tidy. Além disso, existem duas funções que podem ser importantes na nossa análise: separate e unite, que separa uma coluna em duas e vice versa. 3.1.1 gather Vamos criar um tibble no formato wide e transformá-lo em um dado tidy: library(tibble) tb &lt;- tibble(uf = c(&quot;RJ&quot;, &quot;SP&quot;), `2017` = c(10, 11), `2018` = c(11, 10)) tb ## # A tibble: 2 x 3 ## uf `2017` `2018` ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 RJ 10 11 ## 2 SP 11 10 "]
]
